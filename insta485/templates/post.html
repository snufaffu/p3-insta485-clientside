<!doctype html>
<html lang="en">
    <head>
        <title>insta485</title>
    </head>
    <body>
        <h3><a href="/">Home</a></h3>
        <h3><a href="/explore/">Explore</a></h3>
        <h3><a href="/users/{{logname}}/">{{logname}}</a></h3>

        <div>
            {% if post.owner == logname %}
            <!-- DO NOT CHANGE THIS (aside from where we say 'FIXME') -->
            <form
                action="/posts/?target={{ url_for('show_posts', postid_url_slug=postid) }}"
                method="post"
                enctype="multipart/form-data"
            >
                <input
                    type="hidden"
                    name="csrf_token"
                    value="{{ csrf_token() }}"
                />
                <input type="hidden" name="operation" value="delete" />
                <input type="hidden" name="postid" value="{{ postid}}" />
                <input type="submit" name="delete" value="delete this post" />
            </form>
            {% endif %} {% if logname_likes_this %}
            <form
                action="/likes/?target={{ url_for('show_posts', postid_url_slug=postid) }}"
                method="post"
                enctype="multipart/form-data"
            >
                <input
                    type="hidden"
                    name="csrf_token"
                    value="{{ csrf_token() }}"
                />
                <input type="hidden" name="operation" value="unlike" />
                <input type="hidden" name="postid" value="{{ postid }}" />
                <input type="submit" name="unlike" value="unlike" />
            </form>
            {% else %}
            <form
                action="/likes/?target={{ url_for('show_posts', postid_url_slug=postid) }}"
                method="post"
                enctype="multipart/form-data"
            >
                <input
                    type="hidden"
                    name="csrf_token"
                    value="{{ csrf_token() }}"
                />
                <input type="hidden" name="operation" value="like" />
                <input type="hidden" name="postid" value="{{ postid }}" />
                <input type="submit" name="like" value="like" />
            </form>
            {% endif %}
            <a href="/users/{{owner}}/">
                <img src="{{owner_img_url}}" alt="{{owner}}" />
            </a>
            <p><a href="/users/{{owner}}/">{{owner}}</a></p>
            <img src="{{img_url}}" alt="{{ postid }}" />
            <p><a href="/posts/{{postid}}/">{{timestamp}}</a></p>
            <p>
                {{likes}} {% if likes == 1%} like {% else %} likes {% endif %}
            </p>
            {% for comment in comments %} {% if comment.owner == logname %}
            <form
                action="/comments/?target={{ url_for('show_posts', postid_url_slug=postid) }}"
                method="post"
                enctype="multipart/form-data"
            >
                <input
                    type="hidden"
                    name="csrf_token"
                    value="{{ csrf_token() }}"
                />
                <input type="hidden" name="operation" value="delete" />
                <input
                    type="hidden"
                    name="commentid"
                    value="{{ comment.commentid}}"
                />
                <input type="submit" name="uncomment" value="delete" />
            </form>
            {% endif %}
            <p>
                <a href="/users/{{comment.owner}}/">{{comment.owner}}</a>
                {{comment.text}}
            </p>
            {% endfor %}
            <form
                action="/comments/?target={{ url_for('show_posts', postid_url_slug=postid) }}"
                method="post"
                enctype="multipart/form-data"
            >
                <input
                    type="hidden"
                    name="csrf_token"
                    value="{{ csrf_token() }}"
                />
                <input type="hidden" name="operation" value="create" />
                <input type="hidden" name="postid" value="{{ postid }}" />
                <input type="text" name="text" required />
                <input type="submit" name="comment" value="comment" />
            </form>
        </div>
    </body>
</html>
